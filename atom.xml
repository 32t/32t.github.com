<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>32bits</title>
  <subtitle>Smart is new sex</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://32t.github.io/"/>
  <updated>2016-07-03T06:01:07.000Z</updated>
  <id>http://32t.github.io/</id>
  
  <author>
    <name>Simon</name>
    <email>zhaoxiaomeng@pku.edu.cn</email>
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>MD5 算法介绍</title>
    <link href="http://32t.github.io/2016/07/03/MD5-%E7%AE%97%E6%B3%95%E4%BB%8B%E7%BB%8D/"/>
    <id>http://32t.github.io/2016/07/03/MD5-算法介绍/</id>
    <published>2016-07-03T05:41:49.000Z</published>
    <updated>2016-07-03T06:01:07.000Z</updated>
    
    <content type="html">&lt;p&gt;&amp;#160; &amp;#160; &amp;#160; &amp;#160;MD5即Message-Digest Algorithm 5（信息-摘要算法5），用于确保信息传输完整一致。是计算机广泛使用的杂凑算法之一（又译摘要算法、哈希算法），主流编程语言普遍已有MD5实现。将数据（如汉字）运算为另一固定长度值，是杂凑算法的基础原理，MD5的前身有MD2、MD3和MD4。&lt;/p&gt;
&lt;p&gt;&amp;#160; &amp;#160; &amp;#160; &amp;#160;MD5算法具有以下特点：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;压缩性：任意长度的数据，算出的MD5值长度都是固定的。&lt;/li&gt;
&lt;li&gt;容易计算：从原数据计算出MD5值很容易。&lt;/li&gt;
&lt;li&gt;抗修改性：对原数据进行任何改动，哪怕只修改1个字节，所得到的MD5值都有很大区别。&lt;/li&gt;
&lt;li&gt;强抗碰撞：已知原数据和其MD5值，想找到一个具有相同MD5值的数据（即伪造数据）是非常困难的。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&amp;#160; &amp;#160; &amp;#160; &amp;#160;MD5的作用是让大容量信息在用数字签名软件签署私人密钥前被”压缩”成一种保密的格式（就是把一个任意长度的字节串变换成一定长的十六进制数字串）。除了MD5以外，其中比较有名的还有sha-1、RIPEMD以及Haval等。&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h1 id=&quot;MD5算法历史&quot;&gt;&lt;a href=&quot;#MD5算法历史&quot; class=&quot;headerlink&quot; title=&quot;MD5算法历史&quot;&gt;&lt;/a&gt;MD5算法历史&lt;/h1&gt;&lt;ol&gt;
&lt;li&gt;&lt;p&gt;MD2&lt;/p&gt;
&lt;p&gt;Rivest在1989年开发出MD2算法。在这个算法中，首先对信息进行数据补位，使信息的字节长度是16的倍数。然后，以一个16位的检验和追加到信息末尾，并且根据这个新产生的信息计算出散列值。后来，Rogier和Chauvaud发现如果忽略了检验将和MD2产生冲突。MD2算法加密后结果是唯一的（即不同信息加密后的结果不同）。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;MD4&lt;/p&gt;
&lt;p&gt;为了加强算法的安全性，Rivest在1990年又开发出MD4算法。MD4算法同样需要填补信息以确保信息的比特位长度减去448后能被512整除（信息比特位长度mod 512 = 448）。然后，一个以64位二进制表示的信息的最初长度被添加进来。信息被处理成512位damg?rd/merkle迭代结构的区块，而且每个区块要通过三个不同步骤的处理。Den boer和Bosselaers以及其他人很快的发现了攻击MD4版本中第一步和第三步的漏洞。Dobbertin向大家演示了如何利用一部普通的个人电脑在几分钟内找到MD4完整版本中的冲突（这个冲突实际上是一种漏洞，它将导致对不同的内容进行加密却可能得到相同的加密后结果）。毫无疑问，MD4就此被淘汰掉了。&lt;/p&gt;
&lt;p&gt;尽管MD4算法在安全上有个这么大的漏洞，但它对在其后才被开发出来的好几种信息安全加密算法的出现却有着不可忽视的引导作用。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;MD5&lt;/p&gt;
&lt;p&gt;1991年，Rivest开发出技术上更为趋近成熟的md5算法。它在MD4的基础上增加了”安全-带子”（safety-belts）的概念。虽然MD5比MD4复杂度大一些，但却更为安全。这个算法很明显的由四个和MD4设计有少许不同的步骤组成。在MD5算法中，信息-摘要的大小和填充的必要条件与MD4完全相同。Den boer和Bosselaers曾发现MD5算法中的假冲突（pseudo-collisions），但除此之外就没有其他被发现的加密后结果了。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h1 id=&quot;MD5算法功能&quot;&gt;&lt;a href=&quot;#MD5算法功能&quot; class=&quot;headerlink&quot; title=&quot;MD5算法功能&quot;&gt;&lt;/a&gt;MD5算法功能&lt;/h1&gt;&lt;ol&gt;
&lt;li&gt;&lt;p&gt;防止被篡改：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;比如发送一个电子文档，发送前，我先得到MD5的输出结果a。然后在对方收到电子文档后，对方也得到一个MD5的输出结果b。如果a与b一样就代表中途未被篡改。&lt;/li&gt;
&lt;li&gt;比如我提供文件下载，为了防止不法分子在安装程序中添加木马，我可以在网站上公布由安装文件得到的MD5输出结果。&lt;/li&gt;
&lt;li&gt;SVN在检测文件是否在CheckOut后被修改过，也是用到了MD5.&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;防止直接看到明文：&lt;br&gt;现在很多网站在数据库存储用户的密码的时候都是存储用户密码的MD5值。这样就算不法分子得到数据库的用户密码的MD5值，也无法知道用户的密码(其实这样是不安全的，后面我会提到)。（比如在UNIX系统中用户的密码就是以MD5（或其它类似的算法）经加密后存储在文件系统中。当用户登录的时候，系统把用户输入的密码计算成MD5值，然后再去和保存在文件系统中的MD5值进行比较，进而确定输入的密码是否正确。通过这样的步骤，系统在并不知道用户密码的明码的情况下就可以确定用户登录系统的合法性。这不但可以避免用户的密码被具有系统管理员权限的用户知道，而且还在一定程度上增加了密码被破解的难度。）&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;防止抵赖（数字签名）：&lt;/p&gt;
&lt;p&gt;这需要一个第三方认证机构。例如A写了一个文件，认证机构对此文件用MD5算法产生摘要信息并做好记录。若以后A说这文件不是他写的，权威机构只需对此文件重新产生摘要信息，然后跟记录在册的摘要信息进行比对，相同的话，就证明是A写的了。这就是所谓的“数字签名”。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h1 id=&quot;MD5算法原理&quot;&gt;&lt;a href=&quot;#MD5算法原理&quot; class=&quot;headerlink&quot; title=&quot;MD5算法原理&quot;&gt;&lt;/a&gt;MD5算法原理&lt;/h1&gt;&lt;p&gt;对MD5算法简要的叙述可以为：MD5以512位分组来处理输入的信息，且每一分组又被划分为16个32位子分组，经过了一系列的处理后，算法的输出由四个32位分组组成，将这四个32位分组级联后将生成一个128位散列值。&lt;/p&gt;
&lt;h2 id=&quot;第一步、填充：&quot;&gt;&lt;a href=&quot;#第一步、填充：&quot; class=&quot;headerlink&quot; title=&quot;第一步、填充：&quot;&gt;&lt;/a&gt;第一步、填充：&lt;/h2&gt;&lt;p&gt;如果输入信息的长度(bit)对512求余的结果不等于448，就需要填充使得对512求余的结果等于448。填充的方法是填充一个1和n个0。填充完后，信息的长度就为N*512+448(bit)；&lt;/p&gt;
&lt;h2 id=&quot;第二步、记录信息长度：&quot;&gt;&lt;a href=&quot;#第二步、记录信息长度：&quot; class=&quot;headerlink&quot; title=&quot;第二步、记录信息长度：&quot;&gt;&lt;/a&gt;第二步、记录信息长度：&lt;/h2&gt;&lt;p&gt;用64位来存储填充前信息长度。这64位加在第一步结果的后面，这样信息长度就变为&lt;code&gt;N*512+448+64=(N+1)*512&lt;/code&gt;位。&lt;/p&gt;
&lt;h2 id=&quot;第三步、装入标准的幻数（四个整数）：&quot;&gt;&lt;a href=&quot;#第三步、装入标准的幻数（四个整数）：&quot; class=&quot;headerlink&quot; title=&quot;第三步、装入标准的幻数（四个整数）：&quot;&gt;&lt;/a&gt;第三步、装入标准的幻数（四个整数）：&lt;/h2&gt;&lt;p&gt;标准的幻数（物理顺序）是&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;A=(01234567)16，B=(89ABCDEF)16，C=(FEDCBA98)16，D=(76543210)16&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;如果在程序中定义应该是&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;A=0X67452301L，B=0XEFCDAB89L，C=0X98BADCFEL，D=0X10325476L&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;因为是小端的原因。&lt;/p&gt;
&lt;h2 id=&quot;第四步、分组个数（N-1）次四轮循环运算&quot;&gt;&lt;a href=&quot;#第四步、分组个数（N-1）次四轮循环运算&quot; class=&quot;headerlink&quot; title=&quot;第四步、分组个数（N+1）次四轮循环运算&quot;&gt;&lt;/a&gt;第四步、分组个数（N+1）次四轮循环运算&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;将每一512字节细分成16个小组，每个小组64位（8个字节）&lt;/li&gt;
&lt;li&gt;&lt;p&gt;定义四个线性函数(&amp;amp;是与,|是或,~是非,^是异或)&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;F(X,Y,Z)=(X&amp;amp;Y)|((~X)&amp;amp;Z)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;G(X,Y,Z)=(X&amp;amp;Z)|(Y&amp;amp;(~Z))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;H(X,Y,Z)=X^Y^Z&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;I(X,Y,Z)=Y^(X|(~Z))&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;设Mj表示消息的第j个子分组（从0到15），&amp;lt;&amp;lt;&amp;lt;s表示循环左移s位，则四种操作为：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;FF(a,b,c,d,M[j],s,t[i])表示a=b+((a+F(b,c,d)+M[j]+t[i])&amp;lt;&amp;lt;&amp;lt;s)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;GG(a,b,c,d,M[j],s,t[i])表示a=b+((a+G(b,c,d)+M[j]+t[i])&amp;lt;&amp;lt;&amp;lt;s)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;HH(a,b,c,d,M[j],s,t[i])表示a=b+((a+H(b,c,d)+M[j]+t[i])&amp;lt;&amp;lt;&amp;lt;s)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;II(a,b,c,d,M[j],s,t[i])表示a=b+((a+I(b,c,d)+M[j]+t[i])&amp;lt;&amp;lt;&amp;lt;s)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;T[i]等于4294967296*abs(sin(i))所得结果的整数部分，其中k用弧度来表示。(这样做是为了通过正弦函数和幂函数来进一步消除变换中的线性) 4294967296=2^32&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;四轮运算&lt;br&gt;第一轮&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;a=FF(a,b,c,d,M0,7,0xd76aa478)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;b=FF(d,a,b,c,M1,12,0xe8c7b756)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;c=FF(c,d,a,b,M2,17,0x242070db)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;d=FF(b,c,d,a,M3,22,0xc1bdceee)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;a=FF(a,b,c,d,M4,7,0xf57c0faf)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;b=FF(d,a,b,c,M5,12,0x4787c62a)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;c=FF(c,d,a,b,M6,17,0xa8304613)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;d=FF(b,c,d,a,M7,22,0xfd469501)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;a=FF(a,b,c,d,M8,7,0x698098d8)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;b=FF(d,a,b,c,M9,12,0x8b44f7af)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;c=FF(c,d,a,b,M10,17,0xffff5bb1)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;d=FF(b,c,d,a,M11,22,0x895cd7be)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;a=FF(a,b,c,d,M12,7,0x6b901122)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;b=FF(d,a,b,c,M13,12,0xfd987193)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;c=FF(c,d,a,b,M14,17,0xa679438e)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;d=FF(b,c,d,a,M15,22,0x49b40821)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;第二轮&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;a=GG(a,b,c,d,M1,5,0xf61e2562)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;b=GG(d,a,b,c,M6,9,0xc040b340)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;c=GG(c,d,a,b,M11,14,0x265e5a51)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;d=GG(b,c,d,a,M0,20,0xe9b6c7aa)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;a=GG(a,b,c,d,M5,5,0xd62f105d)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;b=GG(d,a,b,c,M10,9,0x02441453)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;c=GG(c,d,a,b,M15,14,0xd8a1e681)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;d=GG(b,c,d,a,M4,20,0xe7d3fbc8)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;a=GG(a,b,c,d,M9,5,0x21e1cde6)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;b=GG(d,a,b,c,M14,9,0xc33707d6)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;c=GG(c,d,a,b,M3,14,0xf4d50d87)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;d=GG(b,c,d,a,M8,20,0x455a14ed)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;a=GG(a,b,c,d,M13,5,0xa9e3e905)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;b=GG(d,a,b,c,M2,9,0xfcefa3f8)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;c=GG(c,d,a,b,M7,14,0x676f02d9)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;d=GG(b,c,d,a,M12,20,0x8d2a4c8a)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;第三轮&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;a=HH(a,b,c,d,M5,4,0xfffa3942)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;b=HH(d,a,b,c,M8,11,0x8771f681)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;c=HH(c,d,a,b,M11,16,0x6d9d6122)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;d=HH(b,c,d,a,M14,23,0xfde5380c)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;a=HH(a,b,c,d,M1,4,0xa4beea44)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;b=HH(d,a,b,c,M4,11,0x4bdecfa9)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;c=HH(c,d,a,b,M7,16,0xf6bb4b60)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;d=HH(b,c,d,a,M10,23,0xbebfbc70)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;a=HH(a,b,c,d,M13,4,0x289b7ec6)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;b=HH(d,a,b,c,M0,11,0xeaa127fa)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;c=HH(c,d,a,b,M3,16,0xd4ef3085)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;d=HH(b,c,d,a,M6,23,0x04881d05)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;a=HH(a,b,c,d,M9,4,0xd9d4d039)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;b=HH(d,a,b,c,M12,11,0xe6db99e5)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;c=HH(c,d,a,b,M15,16,0x1fa27cf8)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;d=HH(b,c,d,a,M2,23,0xc4ac5665)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;第四轮&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;a=II(a,b,c,d,M0,6,0xf4292244)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;b=II(d,a,b,c,M7,10,0x432aff97)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;c=II(c,d,a,b,M14,15,0xab9423a7)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;d=II(b,c,d,a,M5,21,0xfc93a039)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;a=II(a,b,c,d,M12,6,0x655b59c3)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;b=II(d,a,b,c,M3,10,0x8f0ccc92)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;c=II(c,d,a,b,M10,15,0xffeff47d)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;d=II(b,c,d,a,M1,21,0x85845dd1)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;a=II(a,b,c,d,M8,6,0x6fa87e4f)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;b=II(d,a,b,c,M15,10,0xfe2ce6e0)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;c=II(c,d,a,b,M6,15,0xa3014314)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;d=II(b,c,d,a,M13,21,0x4e0811a1)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;a=II(a,b,c,d,M4,6,0xf7537e82)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;b=II(d,a,b,c,M11,10,0xbd3af235)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;c=II(c,d,a,b,M2,15,0x2ad7d2bb)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;d=II(b,c,d,a,M9,21,0xeb86d391)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;每一轮的每一个操作都可以用上面的图片表示，在第一轮的第一个操作中，F 代表了 F 函数，第一个操作结束后，A 变成了第一轮中的 D，B 为第一轮的计算结果，C为第一轮中的 B，D 为第一轮中的 C，在第二轮中 A 即为 D， 另外三个也符合算法的规则。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;每轮循环后，将A，B，C，D分别加上a，b，c，d，然后进入下一循环。&lt;/li&gt;
&lt;li&gt;最终输出长度为128bit 的ABCD，即为散列值。&lt;/li&gt;
&lt;/ol&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&amp;#160; &amp;#160; &amp;#160; &amp;#160;MD5即Message-Digest Algorithm 5（信息-摘要算法5），用于确保信息传输完整一致。是计算机广泛使用的杂凑算法之一（又译摘要算法、哈希算法），主流编程语言普遍已有MD5实现。将数据（如汉字）运算为另一固定长度值，是杂凑算法的基础原理，MD5的前身有MD2、MD3和MD4。&lt;/p&gt;
&lt;p&gt;&amp;#160; &amp;#160; &amp;#160; &amp;#160;MD5算法具有以下特点：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;压缩性：任意长度的数据，算出的MD5值长度都是固定的。&lt;/li&gt;
&lt;li&gt;容易计算：从原数据计算出MD5值很容易。&lt;/li&gt;
&lt;li&gt;抗修改性：对原数据进行任何改动，哪怕只修改1个字节，所得到的MD5值都有很大区别。&lt;/li&gt;
&lt;li&gt;强抗碰撞：已知原数据和其MD5值，想找到一个具有相同MD5值的数据（即伪造数据）是非常困难的。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&amp;#160; &amp;#160; &amp;#160; &amp;#160;MD5的作用是让大容量信息在用数字签名软件签署私人密钥前被”压缩”成一种保密的格式（就是把一个任意长度的字节串变换成一定长的十六进制数字串）。除了MD5以外，其中比较有名的还有sha-1、RIPEMD以及Haval等。&lt;/p&gt;
    
    </summary>
    
    
      <category term="密码学" scheme="http://32t.github.io/tags/%E5%AF%86%E7%A0%81%E5%AD%A6/"/>
    
      <category term="MD5" scheme="http://32t.github.io/tags/MD5/"/>
    
      <category term="算法" scheme="http://32t.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>HMAC 用作用户登录</title>
    <link href="http://32t.github.io/2016/07/02/HMAC-%E7%94%A8%E4%BD%9C%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95/"/>
    <id>http://32t.github.io/2016/07/02/HMAC-用作用户登录/</id>
    <published>2016-07-02T06:24:52.000Z</published>
    <updated>2016-07-02T06:24:52.000Z</updated>
    
    <content type="html"></content>
    
    <summary type="html">
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>PBKDF2介绍</title>
    <link href="http://32t.github.io/2016/07/02/PBKDF2%E4%BB%8B%E7%BB%8D/"/>
    <id>http://32t.github.io/2016/07/02/PBKDF2介绍/</id>
    <published>2016-07-02T05:52:42.000Z</published>
    <updated>2016-07-02T06:01:47.000Z</updated>
    
    <content type="html">&lt;h1 id=&quot;PBKDF2是什么&quot;&gt;&lt;a href=&quot;#PBKDF2是什么&quot; class=&quot;headerlink&quot; title=&quot;PBKDF2是什么&quot;&gt;&lt;/a&gt;PBKDF2是什么&lt;/h1&gt;&lt;p&gt;PBKDF2(Password-Based Key Derivation Function)是一个用来导出密钥的函数，常用于生成加密的密码。&lt;/p&gt;
&lt;p&gt;它的基本原理是通过一个伪随机函数（例如HMAC函数），把明文和一个盐值作为输入参数，然后重复进行运算，并最终产生密钥。&lt;/p&gt;
&lt;p&gt;如果重复的次数足够大，破解的成本就会变得很高。而盐值的添加也会增加“彩虹表”攻击的难度。&lt;/p&gt;
&lt;h1 id=&quot;破解PBKDF2生成的密码要多久&quot;&gt;&lt;a href=&quot;#破解PBKDF2生成的密码要多久&quot; class=&quot;headerlink&quot; title=&quot;破解PBKDF2生成的密码要多久&quot;&gt;&lt;/a&gt;破解PBKDF2生成的密码要多久&lt;/h1&gt;&lt;p&gt;&lt;img src=&quot;https://sfault-image.b0.upaiyun.com/200/341/2003417156-568cefd8632e8_articlex&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;上图是14年在一台多GPU的高端PC上进行的测试，可以看到，在4个单词（随机从Diceware列表选择）的情况下，如果每秒能猜2万个密码，则要猜出密码平均需要2890年。如果密码的长度再高点，则这个时间是天文数字了。&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h1 id=&quot;PBKDF2函数的定义&quot;&gt;&lt;a href=&quot;#PBKDF2函数的定义&quot; class=&quot;headerlink&quot; title=&quot;PBKDF2函数的定义&quot;&gt;&lt;/a&gt;PBKDF2函数的定义&lt;/h1&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;DK = PBKDF2(PRF, Password, Salt, c, dkLen)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;PRF是一个伪随机函数，例如HASH_HMAC函数，它会输出长度为hLen的结果。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Password是用来生成密钥的原文密码。&lt;/li&gt;
&lt;li&gt;Salt是一个加密用的盐值。&lt;/li&gt;
&lt;li&gt;c是进行重复计算的次数。&lt;/li&gt;
&lt;li&gt;dkLen是期望得到的密钥的长度。&lt;/li&gt;
&lt;li&gt;DK是最后产生的密钥。&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;PBKDF2的算法流程&quot;&gt;&lt;a href=&quot;#PBKDF2的算法流程&quot; class=&quot;headerlink&quot; title=&quot;PBKDF2的算法流程&quot;&gt;&lt;/a&gt;PBKDF2的算法流程&lt;/h1&gt;&lt;p&gt;DK的值由一个以上的block拼接而成。block的数量是dkLen/hLen的值。就是说如果PRF输出的结果比期望得到的密钥长度要短，则要通过拼接多个结果以满足密钥的长度：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;DK = T1 || T2 || ... || Tdklen/hlen&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;而每个block则通过则通过函数F得到：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Ti = F(Password, Salt, c, i)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;在函数F里，PRF会进行c次的运算，然后把得到的结果进行异或运算，得到最终的值。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;F(Password, Salt, c, i) = U1 ^ U2 ^ ... ^ Uc&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;第一次，PRF会使用Password作为key，Salt拼接上编码成大字节序的32位整型的i作为盐值进行运算。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;U1 = PRF(Password, Salt || INT_32_BE(i))&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;而后续的c-1次则会使用上次得到的结果作为盐值。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;U2 = PRF(Password, U1)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Uc = PRF(Password, Uc-1)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;函数F大致的流程图如下：&lt;br&gt;&lt;img src=&quot;https://sfault-image.b0.upaiyun.com/344/660/3446601878-568cf7d060dd8_articlex&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;PBKDF2算法在PHP中的使用&quot;&gt;&lt;a href=&quot;#PBKDF2算法在PHP中的使用&quot; class=&quot;headerlink&quot; title=&quot;PBKDF2算法在PHP中的使用&quot;&gt;&lt;/a&gt;PBKDF2算法在PHP中的使用&lt;/h1&gt;&lt;p&gt;从PHP5.5版本开始，PHP提供了原生的函数hash_pbkdf2实现PBKDF2算法：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;string hash_pbkdf2 ( string $algo , string $password , string $salt , int $iterations [, int $length = 0 [, bool $raw_output = false ]] )&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;具体用法请看：&lt;a href=&quot;http://php.net/manual/en/function.hash-pbkdf2.php&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://php.net/manual/en/function.hash-pbkdf2.php&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;而在这个版本之前，我们可以使用其他用户写的兼容方法，例如：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;?php&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;if (!function_exists(&amp;apos;hash_pbkdf2&amp;apos;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    function hash_pbkdf2($algo, $password, $salt, $count, $length = 0, $raw_output = false)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if (!in_array(strtolower($algo), hash_algos())) trigger_error(__FUNCTION__ . &amp;apos;(): Unknown hashing algorithm: &amp;apos; . $algo, E_USER_WARNING);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if (!is_numeric($count)) trigger_error(__FUNCTION__ . &amp;apos;(): expects parameter 4 to be long, &amp;apos; . gettype($count) . &amp;apos; given&amp;apos;, E_USER_WARNING);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if (!is_numeric($length)) trigger_error(__FUNCTION__ . &amp;apos;(): expects parameter 5 to be long, &amp;apos; . gettype($length) . &amp;apos; given&amp;apos;, E_USER_WARNING);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if ($count &amp;lt;= 0) trigger_error(__FUNCTION__ . &amp;apos;(): Iterations must be a positive integer: &amp;apos; . $count, E_USER_WARNING);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if ($length &amp;lt; 0) trigger_error(__FUNCTION__ . &amp;apos;(): Length must be greater than or equal to 0: &amp;apos; . $length, E_USER_WARNING);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        $output = &amp;apos;&amp;apos;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        $block_count = $length ? ceil($length / strlen(hash($algo, &amp;apos;&amp;apos;, $raw_output))) : 1;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        for ($i = 1; $i &amp;lt;= $block_count; $i++)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            $last = $xorsum = hash_hmac($algo, $salt . pack(&amp;apos;N&amp;apos;, $i), $password, true);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            for ($j = 1; $j &amp;lt; $count; $j++)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                $xorsum ^= ($last = hash_hmac($algo, $last, $password, true));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            $output .= $xorsum;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if (!$raw_output) $output = bin2hex($output);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return $length ? substr($output, 0, $length) : $output;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;又或者这个：&lt;a href=&quot;https://github.com/rchouinard/hash_pbkdf2-compat&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/rchouinard/hash_pbkdf2-compat&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;基于安全考虑，需要注意以下几点：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;$algo建议选择SHA256或更安全的哈希算法。&lt;/li&gt;
&lt;li&gt;$salt至少为8字节，且要为随机数。&lt;/li&gt;
&lt;li&gt;&lt;p&gt;$count迭代次数建议至少为50000次，除非有严格的性能要求。&lt;br&gt;参考:&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;http://en.wikipedia.org/wiki/PBKDF2&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://en.wikipedia.org/wiki/PBKDF2&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://php.net/manual/en/function.hash-pbkdf2.php&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://php.net/manual/en/function.hash-pbkdf2.php&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://blog.agilebits.com/2014/03/10/crackers-report-great-news-for-1password-4/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://blog.agilebits.com/2014/03/10/crackers-report-great-news-for-1password-4/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;PBKDF2是什么&quot;&gt;&lt;a href=&quot;#PBKDF2是什么&quot; class=&quot;headerlink&quot; title=&quot;PBKDF2是什么&quot;&gt;&lt;/a&gt;PBKDF2是什么&lt;/h1&gt;&lt;p&gt;PBKDF2(Password-Based Key Derivation Function)是一个用来导出密钥的函数，常用于生成加密的密码。&lt;/p&gt;
&lt;p&gt;它的基本原理是通过一个伪随机函数（例如HMAC函数），把明文和一个盐值作为输入参数，然后重复进行运算，并最终产生密钥。&lt;/p&gt;
&lt;p&gt;如果重复的次数足够大，破解的成本就会变得很高。而盐值的添加也会增加“彩虹表”攻击的难度。&lt;/p&gt;
&lt;h1 id=&quot;破解PBKDF2生成的密码要多久&quot;&gt;&lt;a href=&quot;#破解PBKDF2生成的密码要多久&quot; class=&quot;headerlink&quot; title=&quot;破解PBKDF2生成的密码要多久&quot;&gt;&lt;/a&gt;破解PBKDF2生成的密码要多久&lt;/h1&gt;&lt;p&gt;&lt;img src=&quot;https://sfault-image.b0.upaiyun.com/200/341/2003417156-568cefd8632e8_articlex&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;上图是14年在一台多GPU的高端PC上进行的测试，可以看到，在4个单词（随机从Diceware列表选择）的情况下，如果每秒能猜2万个密码，则要猜出密码平均需要2890年。如果密码的长度再高点，则这个时间是天文数字了。&lt;/p&gt;
    
    </summary>
    
    
      <category term="PBKDF" scheme="http://32t.github.io/tags/PBKDF/"/>
    
      <category term="PRF" scheme="http://32t.github.io/tags/PRF/"/>
    
  </entry>
  
  <entry>
    <title>Nginx+uWSGI+Django 优化</title>
    <link href="http://32t.github.io/2016/04/09/nginx_uwgsi_django_optmi/"/>
    <id>http://32t.github.io/2016/04/09/nginx_uwgsi_django_optmi/</id>
    <published>2016-04-09T12:50:32.000Z</published>
    <updated>2016-04-09T12:46:30.000Z</updated>
    
    <content type="html">&lt;p&gt;#&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;#&lt;/p&gt;

    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Nginx+uWSGI+Django 配置</title>
    <link href="http://32t.github.io/2016/04/09/nginx_uwgsi_django/"/>
    <id>http://32t.github.io/2016/04/09/nginx_uwgsi_django/</id>
    <published>2016-04-09T09:50:32.000Z</published>
    <updated>2016-07-02T06:04:33.000Z</updated>
    
    <content type="html">&lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;&amp;#160; &amp;#160; &amp;#160; &amp;#160;我们在使用 Django 开发的时，测试过程中通常使用 Django 自带的 web 服务器，并设置 Debug=False，这样可以实时修改代码并更新程序。但是在生产环境中通常使用 Nginx+uWSGI+Django 这样的模式。&lt;/p&gt;
&lt;p&gt;&amp;#160; &amp;#160; &amp;#160; &amp;#160;在这种模式中，使用 Nginx 作为最前端 web 服务器，它接收所有请求并统一管理所有请求。然后 Nginx 将所有的非静态请求通过 uWSGI发送给 Django 处理，Django 处理返回结果由 uWSGI 发给 Nginx，并返回给用户。可见，uWSGI的作用就类似一个桥接器。起到桥梁的作用。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;不使用Nginx，只使用uWSGI+Django也是可以实现WEB服务的。uWSGI也可以直接处理WEB请求&lt;/p&gt;
&lt;/blockquote&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h1 id=&quot;uwsgi、uWSGI、WSGI的区别&quot;&gt;&lt;a href=&quot;#uwsgi、uWSGI、WSGI的区别&quot; class=&quot;headerlink&quot; title=&quot;uwsgi、uWSGI、WSGI的区别&quot;&gt;&lt;/a&gt;uwsgi、uWSGI、WSGI的区别&lt;/h1&gt;&lt;h2 id=&quot;WSGI&quot;&gt;&lt;a href=&quot;#WSGI&quot; class=&quot;headerlink&quot; title=&quot;WSGI&quot;&gt;&lt;/a&gt;WSGI&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;WSGI，全称 Web Server Gateway Interface，或者 Python Web Server Gateway Interface ，是为 Python 语言定义的 Web 服务器和 Web 应用程序或框架之间的一种简单而通用的接口。自从 WSGI 被开发出来以后，许多其它语言中也出现了类似接口。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&amp;#160; &amp;#160; &amp;#160; &amp;#160;WSGI 的官方定义是，the Python Web Server Gateway Interface。从名字就可以看出来，这东西是一个Gateway，也就是网关。网关的作用就是在协议之间进行转换。&lt;/p&gt;
&lt;p&gt;&amp;#160; &amp;#160; &amp;#160; &amp;#160;WSGI 是作为 Web 服务器与 Web 应用程序或应用框架之间的一种低级别的接口，以提升可移植 Web 应用开发的共同点。WSGI 是基于现存的 CGI 标准而设计的。&lt;/p&gt;
&lt;p&gt;&amp;#160; &amp;#160; &amp;#160; &amp;#160;&lt;br&gt;很多框架都自带了 WSGI server ，比如 Flask，webpy，Django、CherryPy等等。当然性能都不好，自带的 web server 更多的是测试用途，发布时则使用生产环境的 WSGI server或者是联合 Nginx 做 uwsgi 。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;也就是说，WSGI就像是一座桥梁，一边连着web服务器，另一边连着用户的应用。但是呢，这个桥的功能很弱，有时候还需要别的桥来帮忙才能进行处理。WSGI 的作用如图所示：&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;http://www.nowamagic.net/librarys/images/201309/2013_09_04_01.png&quot; alt=&quot;WSGI 的作用&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;WSGI的作用&quot;&gt;&lt;a href=&quot;#WSGI的作用&quot; class=&quot;headerlink&quot; title=&quot;WSGI的作用&quot;&gt;&lt;/a&gt;WSGI的作用&lt;/h3&gt;&lt;p&gt;&amp;#160; &amp;#160; &amp;#160; &amp;#160;&lt;br&gt;WSGI有两方：“服务器”或“网关”一方，以及“应用程序”或“应用框架”一方。服务方调用应用方，提供环境信息，以及一个回调函数（提供给应用程序用来将消息头传递给服务器方），并接收Web内容作为返回值。&lt;/p&gt;
&lt;p&gt;&amp;#160; &amp;#160; &amp;#160; &amp;#160;&lt;br&gt;所谓的 WSGI中间件同时实现了API的两方，因此可以在WSGI服务和WSGI应用之间起调解作用：从WSGI服务器的角度来说，中间件扮演应用程序，而从应用程序的角度来说，中间件扮演服务器。“中间件”组件可以执行以下功能：&lt;/p&gt;
&lt;p&gt;&amp;#160; &amp;#160; &amp;#160; &amp;#160;&lt;br&gt;重写环境变量后，根据目标URL，将请求消息路由到不同的应用对象。&lt;br&gt;允许在一个进程中同时运行多个应用程序或应用框架。&lt;br&gt;负载均衡和远程处理，通过在网络上转发请求和响应消息。&lt;br&gt;进行内容后处理，例如应用XSLT样式表。&lt;br&gt;WSGI 的设计确实参考了 Java 的 servlet。&lt;a href=&quot;http://www.python.org/dev/peps/pep-0333/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;python 开发者文档中&lt;/a&gt;有这么一段话：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;By contrast, although Java has just as many web application frameworks available, Java’s “servlet” API makes it possible for applications written with any Java web application framework to run in any web server that supports the servlet API.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;uWSGI-和-uwsgi&quot;&gt;&lt;a href=&quot;#uWSGI-和-uwsgi&quot; class=&quot;headerlink&quot; title=&quot;uWSGI 和 uwsgi&quot;&gt;&lt;/a&gt;uWSGI 和 uwsgi&lt;/h3&gt;&lt;p&gt;&amp;#160; &amp;#160; &amp;#160; &amp;#160;uWSGI是一个Web服务器，它实现了WSGI协议、uwsgi、http等协议。Nginx中HttpUwsgiModule的作用是与uWSGI服务器进行交换。&lt;/p&gt;
&lt;p&gt;&amp;#160; &amp;#160; &amp;#160; &amp;#160;要注意 WSGI / uwsgi / uWSGI 这三个概念的区分。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;WSGI看过前面小节的同学很清楚了，是一种通信协议。&lt;/li&gt;
&lt;li&gt;uwsgi同WSGI一样是一种通信协议。&lt;/li&gt;
&lt;li&gt;而uWSGI是实现了uwsgi和WSGI两种协议的Web服务器。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&amp;#160; &amp;#160; &amp;#160; &amp;#160;uwsgi协议是一个uWSGI服务器自有的协议，它用于定义传输信息的类型（type of information），每一个uwsgi packet前4byte为传输信息类型描述，它与WSGI相比是两样东西。&lt;/p&gt;
&lt;p&gt;&amp;#160; &amp;#160; &amp;#160; &amp;#160;关于uwsgi协议看这里：The uwsgi protocol。&lt;/p&gt;
&lt;p&gt;&amp;#160; &amp;#160; &amp;#160; &amp;#160;为什么有了uWSGI为什么还需要Nginx？因为Nginx具备优秀的静态内容处理能力，然后将动态内容转发给uWSGI服务器，这样可以达到很好的客户端响应。&lt;/p&gt;
&lt;h2 id=&quot;uWSGI-Django&quot;&gt;&lt;a href=&quot;#uWSGI-Django&quot; class=&quot;headerlink&quot; title=&quot;uWSGI+Django&quot;&gt;&lt;/a&gt;uWSGI+Django&lt;/h2&gt;&lt;p&gt;###安装&lt;/p&gt;
&lt;p&gt;uWSGI 的安装很简单：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;pip install uwsgi&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;现在我们试下将 Django 跑起来。我们先在 virtualenv 创建一个 Django Project：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;[root@nowamagic ~]# cd nowamagic_venv&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[root@nowamagic nowamagic_venv]# source bin/activate&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;(nowamagic_venv)[root@nowamagic nowamagic_venv]# django-admin.py startproject nowamagic_pj&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;virtualenv 的路径与目录文件如下：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://www.nowamagic.net/librarys/images/201309/2013_09_05_01.png&quot; alt=&quot;virtualenv 的路径与目录文件&quot;&gt;&lt;/p&gt;
&lt;p&gt;Django Project 的路径与目录文件如下：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://www.nowamagic.net/librarys/images/201309/2013_09_05_02.png&quot; alt=&quot;Django Project 的路径与目录文件&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;测试uwsgi&quot;&gt;&lt;a href=&quot;#测试uwsgi&quot; class=&quot;headerlink&quot; title=&quot;测试uwsgi&quot;&gt;&lt;/a&gt;测试uwsgi&lt;/h3&gt;&lt;p&gt;在你的服务器上写一个test.py：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;# test.py&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;def application(env, start_response):&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    start_response(&amp;apos;200 OK&amp;apos;, [(&amp;apos;Content-Type&amp;apos;,&amp;apos;text/html&amp;apos;)])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return &amp;quot;Hello World&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;我的 test.py 的路径是 /root/nowamagic_venv/nowamagic_pj/test.py，执行以下命令：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;[root@nowamagic ~]# cd nowamagic_venv&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[root@nowamagic nowamagic_venv]# source bin/activate&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;(nowamagic_venv)[root@nowamagic nowamagic_venv]# uwsgi --http :8001 --wsgi-file /root/nowamagic_venv/nowamagic_pj/test.py&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;访问网页 &lt;a href=&quot;http://115.28.0.89:8001/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://115.28.0.89:8001/&lt;/a&gt;，OK，显示 Hello World，说明 uwsgi 安装成功。&lt;/p&gt;
&lt;h3 id=&quot;测试你的-Django-项目&quot;&gt;&lt;a href=&quot;#测试你的-Django-项目&quot; class=&quot;headerlink&quot; title=&quot;测试你的 Django 项目&quot;&gt;&lt;/a&gt;测试你的 Django 项目&lt;/h3&gt;&lt;p&gt;前面我们用 django-admin.py startproject nowamagic_pj 创建了一个项目，现在我们用 Django 自带的 Web 服务器看看我们的项目有没出问题。还是进入我们虚拟环境：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;[root@nowamagic ~]# cd nowamagic_venv&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[root@nowamagic nowamagic_venv]# source bin/activate&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;(nowamagic_venv)[root@nowamagic nowamagic_venv]# python2.7 /root/nowamagic_venv/nowamagic_pj/manage.py runserver 0.0.0.0:8002&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;OK，启动 Django 自带的服务器了，我们再访问 &lt;a href=&quot;http://115.28.0.89:8002/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://115.28.0.89:8002/&lt;/a&gt;，成功显示：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://www.nowamagic.net/librarys/images/201309/2013_09_05_03.png&quot; alt=&quot;正确显示&quot;&gt;&lt;/p&gt;
&lt;p&gt;说明 Djanggo 项目也没问题。&lt;/p&gt;
&lt;h3 id=&quot;连接Django和uwsgi&quot;&gt;&lt;a href=&quot;#连接Django和uwsgi&quot; class=&quot;headerlink&quot; title=&quot;连接Django和uwsgi&quot;&gt;&lt;/a&gt;连接Django和uwsgi&lt;/h3&gt;&lt;p&gt;最后一步了，我们要把uwsgi与Django连接起来。&lt;/p&gt;
&lt;p&gt;编写django_wsgi.py文件，将其放在与文件manage.py同一个目录下。我的放在 /root/nowamagic_venv/nowamagic_pj/ 下：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;#!/usr/bin/env python&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# coding: utf-8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import os&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import sys&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# 将系统的编码设置为UTF8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;reload(sys)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sys.setdefaultencoding(&amp;apos;utf8&amp;apos;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;os.environ.setdefault(&amp;quot;DJANGO_SETTINGS_MODULE&amp;quot;, &amp;quot;nowamagic_pj.settings&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;from django.core.handlers.wsgi import WSGIHandler&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;application = WSGIHandler()&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;注意不要直接 copy，有个地方要改：注意到语句os.environ.setdefault。比如我的项目为nowamagic_pj，则语句应该是 os.environ.setdefault(“DJANGO_SETTINGS_MODULE”, “nowamagic_pj.settings”)&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;OK，进入虚拟环境执行指令：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;[root@nowamagic ~]# cd nowamagic_venv&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[root@nowamagic nowamagic_venv]# source bin/activate&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;(nowamagic_venv)[root@nowamagic nowamagic_venv]# uwsgi --http :8000 --chdir /root/nowamagic_venv/nowamagic_pj/ --module django_wsgi&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;成功显示 Django It Works 页面。&lt;/p&gt;
&lt;p&gt;这样，你就可以在浏览器中访问你的Django程序了。所有的请求都是经过uwsgi传递给Django程序的。&lt;/p&gt;
&lt;p&gt;这里我们介绍了如何把uwsgi与Django连接起来。&lt;/p&gt;
&lt;h2 id=&quot;Nginx-uWSGI-Django&quot;&gt;&lt;a href=&quot;#Nginx-uWSGI-Django&quot; class=&quot;headerlink&quot; title=&quot;Nginx+uWSGI+Django&quot;&gt;&lt;/a&gt;Nginx+uWSGI+Django&lt;/h2&gt;&lt;p&gt;先安装 Nginx，可以直接用 apt-get 安装&lt;/p&gt;
&lt;h3 id=&quot;Nginx-配置&quot;&gt;&lt;a href=&quot;#Nginx-配置&quot; class=&quot;headerlink&quot; title=&quot;Nginx 配置&quot;&gt;&lt;/a&gt;Nginx 配置&lt;/h3&gt;&lt;p&gt;在 nginx.conf 上加入/修改，我的 server 配置如下（一切从简……）：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;server &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;listen       80;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;server_name  115.28.0.89;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#server_name localhost;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;access_log /home/nowamagic/logs/access.log;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;error_log /home/nowamagic/logs/error.log;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#root         /root/nowamagic_venv/nowamagic_pj;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;location / &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    uwsgi_pass 127.0.0.1:8077;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    #include uwsgi_params;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    include /etc/nginx/uwsgi_params;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    #uwsgi_pass 127.0.0.1:8077;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    #uwsgi_param UWSGI_SCRIPT index;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    #uwsgi_param UWSGI_PYHOME $document_root;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    #uwsgi_param UWSGI_CHDIR  $document_root;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;access_log off;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;注意保证配置里写的目录 /home/nowamagic/logs/ 和 /home/nowamagic/logs/ 存在，接下来就没啥问题了，Nginx 配置很简单。&lt;/p&gt;
&lt;h3 id=&quot;uWSGI-配置&quot;&gt;&lt;a href=&quot;#uWSGI-配置&quot; class=&quot;headerlink&quot; title=&quot;uWSGI 配置&quot;&gt;&lt;/a&gt;uWSGI 配置&lt;/h3&gt;&lt;p&gt;前面我们是直接使用命令行来启动 uWSGI，在实际部署环境中，我们常用的是配置文件的方式，而非命令行的方式。&lt;/p&gt;
&lt;p&gt;我的 Django 程序目录：/root/nowamagic_venv/nowamagic_pj/&lt;/p&gt;
&lt;p&gt;这里让 Nginx 采用 8077 端口与 uWSGI 通讯，请确保此端口没有被其它程序采用。&lt;/p&gt;
&lt;p&gt;uWSGI 支持多种配置文件格式，比如 xml，ini，json 等等都可以。&lt;/p&gt;
&lt;h4 id=&quot;xml-配置&quot;&gt;&lt;a href=&quot;#xml-配置&quot; class=&quot;headerlink&quot; title=&quot;xml 配置&quot;&gt;&lt;/a&gt;xml 配置&lt;/h4&gt;&lt;p&gt;请确定你在上一节中的django_wsgi.py文件已经存在了。新建一个XML文件：nowamagic_pj.xml，将它放在 /root/nowamagic_venv/nowamagic_pj 目录下&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;uwsgi&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &amp;lt;socket&amp;gt;127.0.0.1:8077&amp;lt;/socket&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &amp;lt;listen&amp;gt;80&amp;lt;/listen&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &amp;lt;master&amp;gt;true&amp;lt;/master&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &amp;lt;pythonpath&amp;gt;/root/nowamagic_venv/nowamagic_pj&amp;lt;/pythonpath&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &amp;lt;processes&amp;gt;1&amp;lt;/processes&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &amp;lt;logdate&amp;gt;true&amp;lt;/logdate&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &amp;lt;daemonize&amp;gt;/var/log/uwsgi.log&amp;lt;/daemonize&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &amp;lt;plugins&amp;gt;python&amp;lt;/plugins&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;/uwsgi&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;然后执行命令：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;uwsgi -x /root/nowamagic_venv/nowamagic_pj/nowamagic_pj.xml&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;or&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;/usr/local/bin/uwsgi -x /root/nowamagic_venv/nowamagic_pj/nowamagic_pj.xml&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;加载指定的xml配置文件。当使用命令行参数时，可以使用简化命令“-x”。当然也可以不简写：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;uwsgi --xml /etc/nowamagic.xml&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;甚至如果在命令行的最后一个参数以“.xml”结尾，那么就隐含将加载该xml文件作为配置。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;uwsgi /etc/nowamagic.xml&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;有时候因各种环境问题，&lt;code&gt;-x --xml&lt;/code&gt; 命令识别不了，可以使用下面的 ini 配置方式：&lt;/p&gt;
&lt;h4 id=&quot;ini-配置&quot;&gt;&lt;a href=&quot;#ini-配置&quot; class=&quot;headerlink&quot; title=&quot;ini 配置&quot;&gt;&lt;/a&gt;ini 配置&lt;/h4&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;[uwsgi]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;vhost = false&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;plugins = python&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;socket = 127.0.0.1:8077&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;master = true&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;enable-threads = true&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;workers = 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;wsgi-file = /root/nowamagic_venv/nowamagic_pj/nowamagic_pj/wsgi.py&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;virtualenv = /root/nowamagic_venv&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;chdir = /root/nowamagic_venv/nowamagic_pj&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;然后执行命令：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;uwsgi --ini /root/nowamagic_venv/nowamagic_pj.ini &amp;amp; uwsgi&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;这样就启动起来了。如果无意外的话，就能在网上访问你的 Python 项目了。&lt;/p&gt;
&lt;h2 id=&quot;附&quot;&gt;&lt;a href=&quot;#附&quot; class=&quot;headerlink&quot; title=&quot;附&quot;&gt;&lt;/a&gt;附&lt;/h2&gt;&lt;p&gt;一些我在配置时用到的命令，省得你去搜索：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;关闭 uWSGI：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;killall  -9 uwsgi&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;killall -s HUP /var/www/uwsgi&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;killall -s HUP /usr/local/bin/uwsgi&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;列出端口占用情况：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;netstat -lpnt&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;/ol&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;&amp;#160; &amp;#160; &amp;#160; &amp;#160;我们在使用 Django 开发的时，测试过程中通常使用 Django 自带的 web 服务器，并设置 Debug=False，这样可以实时修改代码并更新程序。但是在生产环境中通常使用 Nginx+uWSGI+Django 这样的模式。&lt;/p&gt;
&lt;p&gt;&amp;#160; &amp;#160; &amp;#160; &amp;#160;在这种模式中，使用 Nginx 作为最前端 web 服务器，它接收所有请求并统一管理所有请求。然后 Nginx 将所有的非静态请求通过 uWSGI发送给 Django 处理，Django 处理返回结果由 uWSGI 发给 Nginx，并返回给用户。可见，uWSGI的作用就类似一个桥接器。起到桥梁的作用。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;不使用Nginx，只使用uWSGI+Django也是可以实现WEB服务的。uWSGI也可以直接处理WEB请求&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="Django" scheme="http://32t.github.io/tags/Django/"/>
    
      <category term="Nginx" scheme="http://32t.github.io/tags/Nginx/"/>
    
      <category term="uWSGI" scheme="http://32t.github.io/tags/uWSGI/"/>
    
  </entry>
  
  <entry>
    <title>如何在 Django 中设置静态文件</title>
    <link href="http://32t.github.io/2016/03/29/how-to-server-django-static-file/"/>
    <id>http://32t.github.io/2016/03/29/how-to-server-django-static-file/</id>
    <published>2016-03-29T04:32:36.000Z</published>
    <updated>2016-04-09T08:57:50.000Z</updated>
    
    <content type="html">&lt;h2 id=&quot;背景&quot;&gt;&lt;a href=&quot;#背景&quot; class=&quot;headerlink&quot; title=&quot;背景&quot;&gt;&lt;/a&gt;背景&lt;/h2&gt;&lt;p&gt;在使用 Django 建设网站的过程中通常需要提供其他一些静态文件，例如 css,js,img 等，然而众所周知，django 无法像 apache 或者 iis 一样直接放上去就可以用，成为了众多新手的一大门槛，笔者也是被折磨了多次。花了一上午时间深入研究了 Django 相关官方文档，记录下来顺便整理一下。&lt;/p&gt;
&lt;h2 id=&quot;静态文件提供的两种方式&quot;&gt;&lt;a href=&quot;#静态文件提供的两种方式&quot; class=&quot;headerlink&quot; title=&quot;静态文件提供的两种方式&quot;&gt;&lt;/a&gt;静态文件提供的两种方式&lt;/h2&gt;&lt;p&gt;Django 提供了 django.contrib.staticfiles 来帮助用户管理静态文件。&lt;/p&gt;
&lt;h3 id=&quot;APP-内部文件&quot;&gt;&lt;a href=&quot;#APP-内部文件&quot; class=&quot;headerlink&quot; title=&quot;APP 内部文件&quot;&gt;&lt;/a&gt;APP 内部文件&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;确保django.contrib.staticfiles 在 settting 文件的 INSTALLED_APPS中&lt;/li&gt;
&lt;li&gt;在 setting 文件中，定义变量 STATIC_URL&lt;br&gt; STATIC_URL = ‘/static/‘&lt;/li&gt;
&lt;li&gt;在 my_site/my_app/目录下新建文件夹static/my_app/ 然后在其下面存放文件 myexample.jpg文件&lt;/li&gt;
&lt;li&gt;&lt;p&gt;在模板中使用的时候，可以有两种使用方式&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;硬编码&lt;br&gt;直接硬编码为/static/my_app/myexample.jpg 这样。注意，Django 会查找所有 app 目录下的static/my_app 文件夹，例如你有两个 app，my_app1,my_app2&lt;br&gt;目录结构如下：&lt;br&gt;my_app1&lt;br&gt;-static&lt;br&gt;—my_app&lt;br&gt;—–myexample.jpg&lt;br&gt;my_app2&lt;br&gt;-static&lt;br&gt;—my_app&lt;br&gt;—–myexample.jpg&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;那么这样使用的时候，会直接使用第一个目录下的文件&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;软编码&lt;br&gt;也可以使用 static 模板标签来根据相对路径生成 url.&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&quot;全局文件&quot;&gt;&lt;a href=&quot;#全局文件&quot; class=&quot;headerlink&quot; title=&quot;全局文件&quot;&gt;&lt;/a&gt;全局文件&lt;/h3&gt;&lt;h3 id=&quot;Django查找静态文件的顺序问题&quot;&gt;&lt;a href=&quot;#Django查找静态文件的顺序问题&quot; class=&quot;headerlink&quot; title=&quot;Django查找静态文件的顺序问题&quot;&gt;&lt;/a&gt;Django查找静态文件的顺序问题&lt;/h3&gt;&lt;p&gt;首先会查找各个 app 下面的 STATIC_URL 文件所指定的目录&lt;/p&gt;
&lt;h3 id=&quot;命名空间-namespace-的问题&quot;&gt;&lt;a href=&quot;#命名空间-namespace-的问题&quot; class=&quot;headerlink&quot; title=&quot;命名空间 namespace 的问题&quot;&gt;&lt;/a&gt;命名空间 namespace 的问题&lt;/h3&gt;&lt;h2 id=&quot;测试环境中使用&quot;&gt;&lt;a href=&quot;#测试环境中使用&quot; class=&quot;headerlink&quot; title=&quot;测试环境中使用&quot;&gt;&lt;/a&gt;测试环境中使用&lt;/h2&gt;&lt;h2 id=&quot;生产环境中使用&quot;&gt;&lt;a href=&quot;#生产环境中使用&quot; class=&quot;headerlink&quot; title=&quot;生产环境中使用&quot;&gt;&lt;/a&gt;生产环境中使用&lt;/h2&gt;</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;背景&quot;&gt;&lt;a href=&quot;#背景&quot; class=&quot;headerlink&quot; title=&quot;背景&quot;&gt;&lt;/a&gt;背景&lt;/h2&gt;&lt;p&gt;在使用 Django 建设网站的过程中通常需要提供其他一些静态文件，例如 css,js,img 等，然而众所周知，django 无法像 ap
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>RMBP13涂层脱落换屏记</title>
    <link href="http://32t.github.io/2016/03/17/rmbp13-screen-fix/"/>
    <id>http://32t.github.io/2016/03/17/rmbp13-screen-fix/</id>
    <published>2016-03-17T08:11:21.000Z</published>
    <updated>2016-03-19T16:08:44.000Z</updated>
    
    <content type="html">&lt;p&gt;之前就听说13款的RMBP反光涂层掉落的问题，当时也没太注意，擦屏幕的方法也比较暴力，直到前两天自己也中了招，一擦之下涂层尽落，再擦一下，落得更多，于是开始了漫漫换屏路。在此记录一下，给同样问题的小伙伴参考。&lt;/p&gt;
&lt;h2 id=&quot;预约Genius-Bar&quot;&gt;&lt;a href=&quot;#预约Genius-Bar&quot; class=&quot;headerlink&quot; title=&quot;预约Genius Bar&quot;&gt;&lt;/a&gt;预约Genius Bar&lt;/h2&gt;&lt;p&gt;首先给400-666-8800打了电话，在说明了问题后，对方会询问序列号和购买时间，同时也会问购买凭证是否还在（实际上用不到），由于涂层脱落问题苹果官方是可以免费换屏的，于是让客服帮忙预约了西单大悦城的genius bar，并记录了邮箱、姓名和电话。&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;去Genius-Bar维修&quot;&gt;&lt;a href=&quot;#去Genius-Bar维修&quot; class=&quot;headerlink&quot; title=&quot;去Genius Bar维修&quot;&gt;&lt;/a&gt;去Genius Bar维修&lt;/h2&gt;&lt;p&gt;提前签到后就是等待了，维修的MM看了屏幕，然后问有没有备份数据（建议大家最好备份一下），开具了维修单并表示两个小时后可以来取。&lt;/p&gt;
&lt;p&gt;然后意外发生了，闲逛磨蹭期间接到维修部门的电话，工程师表示“我们拆机后发现您的主板没有序列号，我们拒绝维修”，我询问了为什么没有序列号以及应该找谁处理问题的时候，该工程师态度很差的说“根据规定，我们拒绝维修”，于是懵比的回来取机器。&lt;/p&gt;
&lt;p&gt;排队了半天，终于有个小蓝人出来给我解释了一下，表示他们也没有遇到过相关情况，因为机器也没有之前的购买记录，激活也是我第一次激活，他们需要向上级部门请示看能否维修，只能第二天上午看上级回复后解决，不过可能需要提供购买凭证，如果需要的话可以以拍照的形式传给他们。给出了我两个选择，要么拿回机器不维修，要么等第二天，作为一个码农只能舍弃半天的敲代码时间，留下了机器。&lt;/p&gt;
&lt;h2 id=&quot;客服答复&quot;&gt;&lt;a href=&quot;#客服答复&quot; class=&quot;headerlink&quot; title=&quot;客服答复&quot;&gt;&lt;/a&gt;客服答复&lt;/h2&gt;&lt;p&gt;第二天上午十点多先给400官方客服打电话咨询情况，询问一下如果主板序列号不存在应该怎么处理，能否让400协商，400表示硬件问题国内最高的权限就是直营店，如果直营店维修人员处理不了，可以咨询店长。于是转而给大悦城的客服打电话咨询维修进度，相关客服表示正在上报，只能根据上级反馈来决定，不过该客服同时表示这种情况一般没问题，最多需要提供购买凭证也可以解决（同时也吐槽了一把序列号写入程序，说可能相关程序bug了）。挂掉电话后就接到了维修部门的电话表示经过他们检测序列号一致，可以维修（WTF？），下午三点前去取即可。&lt;/p&gt;
&lt;p&gt;##取回机器&lt;br&gt;带上身份证和维修单即可取回。&lt;/p&gt;
&lt;p&gt;第一次写这种类型的文章，有点流水账了，总结一下，&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;预约天才吧&lt;/li&gt;
&lt;li&gt;带上机器和身份证去维修（一般两个小时内就可以取，所以直接带上身份证就行了）&lt;/li&gt;
&lt;li&gt;带上身份证和维修单去取机器&lt;/li&gt;
&lt;li&gt;如果有购买凭证的最好带上，以防出现其他问题来回折腾。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&quot;http://ww1.sinaimg.cn/large/63e8a615jw1f22ls3adpzj20go0m80tq.jpg&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://ww1.sinaimg.cn/large/63e8a615jw1f22lsif7tbj20m70m8dhl.jpg&quot; alt=&quot;image&quot;&gt;&lt;br&gt;&lt;img src=&quot;http://ww3.sinaimg.cn/large/63e8a615jw1f22lsy3t61j20go0m83z8.jpg&quot; alt=&quot;iamge&quot;&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;之前就听说13款的RMBP反光涂层掉落的问题，当时也没太注意，擦屏幕的方法也比较暴力，直到前两天自己也中了招，一擦之下涂层尽落，再擦一下，落得更多，于是开始了漫漫换屏路。在此记录一下，给同样问题的小伙伴参考。&lt;/p&gt;
&lt;h2 id=&quot;预约Genius-Bar&quot;&gt;&lt;a href=&quot;#预约Genius-Bar&quot; class=&quot;headerlink&quot; title=&quot;预约Genius Bar&quot;&gt;&lt;/a&gt;预约Genius Bar&lt;/h2&gt;&lt;p&gt;首先给400-666-8800打了电话，在说明了问题后，对方会询问序列号和购买时间，同时也会问购买凭证是否还在（实际上用不到），由于涂层脱落问题苹果官方是可以免费换屏的，于是让客服帮忙预约了西单大悦城的genius bar，并记录了邮箱、姓名和电话。&lt;/p&gt;
    
    </summary>
    
    
      <category term="RMBP13" scheme="http://32t.github.io/tags/RMBP13/"/>
    
      <category term="涂层脱落" scheme="http://32t.github.io/tags/%E6%B6%82%E5%B1%82%E8%84%B1%E8%90%BD/"/>
    
      <category term="Genius Bar" scheme="http://32t.github.io/tags/Genius-Bar/"/>
    
  </entry>
  
  <entry>
    <title>mongo性能调优</title>
    <link href="http://32t.github.io/2016/03/15/mongo-optimization/"/>
    <id>http://32t.github.io/2016/03/15/mongo-optimization/</id>
    <published>2016-03-15T08:11:20.000Z</published>
    <updated>2016-03-19T16:10:57.000Z</updated>
    
    <content type="html">&lt;h2 id=&quot;背景&quot;&gt;&lt;a href=&quot;#背景&quot; class=&quot;headerlink&quot; title=&quot;背景&quot;&gt;&lt;/a&gt;背景&lt;/h2&gt;&lt;p&gt;最近公司在做海外业务的拓展，我负责了海外数据的抓取、分析和接口工作，随着开发的推进和数据量的增加&lt;/p&gt;
&lt;h2 id=&quot;问题&quot;&gt;&lt;a href=&quot;#问题&quot; class=&quot;headerlink&quot; title=&quot;问题&quot;&gt;&lt;/a&gt;问题&lt;/h2&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;调优方案&quot;&gt;&lt;a href=&quot;#调优方案&quot; class=&quot;headerlink&quot; title=&quot;调优方案&quot;&gt;&lt;/a&gt;调优方案&lt;/h2&gt;</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;背景&quot;&gt;&lt;a href=&quot;#背景&quot; class=&quot;headerlink&quot; title=&quot;背景&quot;&gt;&lt;/a&gt;背景&lt;/h2&gt;&lt;p&gt;最近公司在做海外业务的拓展，我负责了海外数据的抓取、分析和接口工作，随着开发的推进和数据量的增加&lt;/p&gt;
&lt;h2 id=&quot;问题&quot;&gt;&lt;a href=&quot;#问题&quot; class=&quot;headerlink&quot; title=&quot;问题&quot;&gt;&lt;/a&gt;问题&lt;/h2&gt;
    
    </summary>
    
    
      <category term="mongodb" scheme="http://32t.github.io/tags/mongodb/"/>
    
      <category term="性能" scheme="http://32t.github.io/tags/%E6%80%A7%E8%83%BD/"/>
    
  </entry>
  
  <entry>
    <title>Markdown学习记录</title>
    <link href="http://32t.github.io/2016/03/11/markdown-start/"/>
    <id>http://32t.github.io/2016/03/11/markdown-start/</id>
    <published>2016-03-11T11:50:32.000Z</published>
    <updated>2016-03-11T16:32:07.000Z</updated>
    
    <content type="html">&lt;blockquote&gt;
&lt;p&gt;We believe that writing is about content, about what you want to say – not about fancy formatting. 我们坚信写作写的是内容，所思所想，而不是花样格式。— Ulysses for Mac&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;写作原因&quot;&gt;&lt;a href=&quot;#写作原因&quot; class=&quot;headerlink&quot; title=&quot;写作原因:&quot;&gt;&lt;/a&gt;写作原因:&lt;/h2&gt;&lt;p&gt;一直在想定期总结一下自己遇到的技术问题和解决方式，顺便记录自己的成长过程。感谢GitHub提供了免费的空间，同时也感谢Hexo的作者，提供了这么好的静态网站制作工具。Hexo文章格式遵循Markdown语法，刚好记录下来，作为第一篇技术学习记录。&lt;/p&gt;
&lt;h2 id=&quot;语法规则&quot;&gt;&lt;a href=&quot;#语法规则&quot; class=&quot;headerlink&quot; title=&quot;语法规则&quot;&gt;&lt;/a&gt;语法规则&lt;/h2&gt;&lt;h3 id=&quot;标题&quot;&gt;&lt;a href=&quot;#标题&quot; class=&quot;headerlink&quot; title=&quot;标题&quot;&gt;&lt;/a&gt;标题&lt;/h3&gt;&lt;p&gt;# 一级标题&lt;/p&gt;
&lt;p&gt;## 二级标题&lt;/p&gt;
&lt;p&gt;### 三级标题&lt;br&gt;以此类推，总共六级标题，建议在井号后加一个空格，这是最标准的 Markdown 语法。&lt;br&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;列表&quot;&gt;&lt;a href=&quot;#列表&quot; class=&quot;headerlink&quot; title=&quot;列表&quot;&gt;&lt;/a&gt;列表&lt;/h3&gt;&lt;h4 id=&quot;无序列表&quot;&gt;&lt;a href=&quot;#无序列表&quot; class=&quot;headerlink&quot; title=&quot;无序列表&quot;&gt;&lt;/a&gt;无序列表&lt;/h4&gt;&lt;p&gt;书写方式&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;* 这

* 是

* 表

* 格
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;效果：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;这&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;是&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;表&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;格&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;有序列表&quot;&gt;&lt;a href=&quot;#有序列表&quot; class=&quot;headerlink&quot; title=&quot;有序列表&quot;&gt;&lt;/a&gt;有序列表&lt;/h4&gt;&lt;p&gt;书写方式&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;1. 这

2. 是

3. 表

4. 格
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;效果：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;这&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;是&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;表&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;格&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&quot;引用&quot;&gt;&lt;a href=&quot;#引用&quot; class=&quot;headerlink&quot; title=&quot;引用&quot;&gt;&lt;/a&gt;引用&lt;/h3&gt;&lt;p&gt;在需要引用的文字之前添加&lt;code&gt;&amp;gt;&lt;/code&gt;即可。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://ww3.sinaimg.cn/large/63e8a615jw1f1tdtgd70lj20r60cc0tc.jpg&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;图片与链接&quot;&gt;&lt;a href=&quot;#图片与链接&quot; class=&quot;headerlink&quot; title=&quot;图片与链接&quot;&gt;&lt;/a&gt;图片与链接&lt;/h3&gt;&lt;p&gt;插入链接与插入图片的语法很像，区别在一个 !号&lt;/p&gt;
&lt;p&gt;图片为：&lt;br&gt;    &lt;code&gt;![](){ImgCap}{/ImgCap}&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;链接为:&lt;br&gt;    &lt;code&gt;[]()&lt;/code&gt;&lt;br&gt;插入图片的地址需要图床，这里推荐围脖图床修复计划 与 CloudApp 的服务，生成URL地址即可。&lt;/p&gt;
&lt;h3 id=&quot;粗体与斜体&quot;&gt;&lt;a href=&quot;#粗体与斜体&quot; class=&quot;headerlink&quot; title=&quot;粗体与斜体&quot;&gt;&lt;/a&gt;粗体与斜体&lt;/h3&gt;&lt;p&gt;Markdown 的粗体和斜体也非常简单，用两个 &lt;em&gt; 包含一段文本就是粗体的语法，用一个 &lt;/em&gt; 包含一段文本就是斜体的语法。&lt;/p&gt;
&lt;p&gt;例如：&lt;strong&gt;这里是粗体&lt;/strong&gt; &lt;em&gt;这里是斜体&lt;/em&gt;&lt;/p&gt;
&lt;h3 id=&quot;表格&quot;&gt;&lt;a href=&quot;#表格&quot; class=&quot;headerlink&quot; title=&quot;表格&quot;&gt;&lt;/a&gt;表格&lt;/h3&gt;&lt;p&gt;表格是我觉得 Markdown 比较累人的地方，例子如下：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;| Tables        | Are           | Cool  |
| ------------- |:-------------:| -----:|
| col 3 is      | right-aligned | $1600 |
| col 2 is      | centered      |   $12 |
| zebra stripes | are neat      |    $1 |
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;效果如下：&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Tables&lt;/th&gt;
&lt;th style=&quot;text-align:center&quot;&gt;Are&lt;/th&gt;
&lt;th style=&quot;text-align:right&quot;&gt;Cool&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;col 3 is&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;right-aligned&lt;/td&gt;
&lt;td style=&quot;text-align:right&quot;&gt;$1600&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;col 2 is&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;centered&lt;/td&gt;
&lt;td style=&quot;text-align:right&quot;&gt;$12&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;zebra stripes&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;are neat&lt;/td&gt;
&lt;td style=&quot;text-align:right&quot;&gt;$1&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id=&quot;代码框&quot;&gt;&lt;a href=&quot;#代码框&quot; class=&quot;headerlink&quot; title=&quot;代码框&quot;&gt;&lt;/a&gt;代码框&lt;/h3&gt;&lt;p&gt;单行代码展示，只需要用`框起来即可：&lt;br&gt;代码：&lt;br&gt;    &lt;code&gt;int a = 1+1&lt;/code&gt;&lt;br&gt;效果如下&lt;/p&gt;
&lt;p&gt;&lt;code&gt;int a = 1+1&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;多行代码展示，需要在多行代码之前添加tab，效果如下：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;def http_get(url):
    success = False
    for i in xrange(3):
        try:
                r = session.get(url, timeout=10)
                if r.status_code == 200:
                        return r.content
        except Exception, e:
             # logger.error(&amp;apos;http get error: %s, url: %s&amp;apos; % (e, url))
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&quot;分割线&quot;&gt;&lt;a href=&quot;#分割线&quot; class=&quot;headerlink&quot; title=&quot;分割线&quot;&gt;&lt;/a&gt;分割线&lt;/h3&gt;&lt;p&gt;分割线的语法只需要三个 * 号。&lt;/p&gt;
&lt;p&gt;代码：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;***
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;效果：&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&quot;其他工具&quot;&gt;&lt;a href=&quot;#其他工具&quot; class=&quot;headerlink&quot; title=&quot;其他工具&quot;&gt;&lt;/a&gt;其他工具&lt;/h2&gt;&lt;h3 id=&quot;图床工具&quot;&gt;&lt;a href=&quot;#图床工具&quot; class=&quot;headerlink&quot; title=&quot;图床工具&quot;&gt;&lt;/a&gt;图床工具&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;http://weibotuchuang.sinaapp.com/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;围脖图床修复计划&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;  安装响应插件后，将图片拖拽上传就可以产生url，方便使用&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;We believe that writing is about content, about what you want to say – not about fancy formatting. 我们坚信写作写的是内容，所思所想，而不是花样格式。— Ulysses for Mac&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;写作原因&quot;&gt;&lt;a href=&quot;#写作原因&quot; class=&quot;headerlink&quot; title=&quot;写作原因:&quot;&gt;&lt;/a&gt;写作原因:&lt;/h2&gt;&lt;p&gt;一直在想定期总结一下自己遇到的技术问题和解决方式，顺便记录自己的成长过程。感谢GitHub提供了免费的空间，同时也感谢Hexo的作者，提供了这么好的静态网站制作工具。Hexo文章格式遵循Markdown语法，刚好记录下来，作为第一篇技术学习记录。&lt;/p&gt;
&lt;h2 id=&quot;语法规则&quot;&gt;&lt;a href=&quot;#语法规则&quot; class=&quot;headerlink&quot; title=&quot;语法规则&quot;&gt;&lt;/a&gt;语法规则&lt;/h2&gt;&lt;h3 id=&quot;标题&quot;&gt;&lt;a href=&quot;#标题&quot; class=&quot;headerlink&quot; title=&quot;标题&quot;&gt;&lt;/a&gt;标题&lt;/h3&gt;&lt;p&gt;# 一级标题&lt;/p&gt;
&lt;p&gt;## 二级标题&lt;/p&gt;
&lt;p&gt;### 三级标题&lt;br&gt;以此类推，总共六级标题，建议在井号后加一个空格，这是最标准的 Markdown 语法。&lt;br&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>统计学笔记</title>
    <link href="http://32t.github.io/2016/03/11/ISLR_chap3/"/>
    <id>http://32t.github.io/2016/03/11/ISLR_chap3/</id>
    <published>2016-03-11T06:51:12.000Z</published>
    <updated>2016-03-19T16:09:30.000Z</updated>
    
    <content type="html">&lt;p&gt;标准差可以用来计算置信度。&lt;br&gt;95%的置信度表示有95%的可能性，某个未知的参数会落在某个区间。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;标准差&lt;/li&gt;
&lt;li&gt;置信度&amp;amp;置信区间&lt;/li&gt;
&lt;li&gt;假设检验&lt;/li&gt;
&lt;li&gt;t-统计&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;标准差可以用来计算置信度。&lt;br&gt;95%的置信度表示有95%的可能性，某个未知的参数会落在某个区间。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;标准差&lt;/li&gt;
&lt;li&gt;置信度&amp;amp;置信区间&lt;/li&gt;
&lt;li&gt;假设检验&lt;/li&gt;
&lt;li&gt;t-统计&lt;/li&gt;
&lt;/ul&gt;

    
    </summary>
    
    
      <category term="统计学" scheme="http://32t.github.io/tags/%E7%BB%9F%E8%AE%A1%E5%AD%A6/"/>
    
      <category term="R" scheme="http://32t.github.io/tags/R/"/>
    
  </entry>
  
  <entry>
    <title>密码学的新方向笔记</title>
    <link href="http://32t.github.io/2016/03/11/Hello-world-again/"/>
    <id>http://32t.github.io/2016/03/11/Hello-world-again/</id>
    <published>2016-03-11T06:51:12.000Z</published>
    <updated>2016-03-19T16:07:25.000Z</updated>
    
    <content type="html">&lt;p&gt;密码学的新方向《NEW DIRECTIONS IN CRYPTOGRAPHY》是Deffie 和 Hellman两位大神于1976年所写的论文，&lt;br&gt;论文介绍了&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;密码学的新方向《NEW DIRECTIONS IN CRYPTOGRAPHY》是Deffie 和 Hellman两位大神于1976年所写的论文，&lt;br&gt;论文介绍了&lt;/p&gt;

    
    </summary>
    
    
      <category term="密码学 论文" scheme="http://32t.github.io/tags/%E5%AF%86%E7%A0%81%E5%AD%A6-%E8%AE%BA%E6%96%87/"/>
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="http://32t.github.io/2016/03/11/hello-world/"/>
    <id>http://32t.github.io/2016/03/11/hello-world/</id>
    <published>2016-03-11T06:46:17.000Z</published>
    <updated>2016-03-19T16:09:32.000Z</updated>
    
    <content type="html">&lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.io/docs/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;documentation&lt;/a&gt; for more info. If you get any problems when using Hexo, you can find the answer in &lt;a href=&quot;https://hexo.io/docs/troubleshooting.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;troubleshooting&lt;/a&gt; or you can ask me on &lt;a href=&quot;https://github.com/hexojs/hexo/issues&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;GitHub&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id=&quot;Quick-Start&quot;&gt;&lt;a href=&quot;#Quick-Start&quot; class=&quot;headerlink&quot; title=&quot;Quick Start&quot;&gt;&lt;/a&gt;Quick Start&lt;/h2&gt;&lt;h3 id=&quot;Create-a-new-post&quot;&gt;&lt;a href=&quot;#Create-a-new-post&quot; class=&quot;headerlink&quot; title=&quot;Create a new post&quot;&gt;&lt;/a&gt;Create a new post&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ hexo new &lt;span class=&quot;string&quot;&gt;&quot;My New Post&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;More info: &lt;a href=&quot;https://hexo.io/docs/writing.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Writing&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;Run-server&quot;&gt;&lt;a href=&quot;#Run-server&quot; class=&quot;headerlink&quot; title=&quot;Run server&quot;&gt;&lt;/a&gt;Run server&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ hexo server&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;More info: &lt;a href=&quot;https://hexo.io/docs/server.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Server&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;Generate-static-files&quot;&gt;&lt;a href=&quot;#Generate-static-files&quot; class=&quot;headerlink&quot; title=&quot;Generate static files&quot;&gt;&lt;/a&gt;Generate static files&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ hexo generate&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;More info: &lt;a href=&quot;https://hexo.io/docs/generating.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Generating&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;Deploy-to-remote-sites&quot;&gt;&lt;a href=&quot;#Deploy-to-remote-sites&quot; class=&quot;headerlink&quot; title=&quot;Deploy to remote sites&quot;&gt;&lt;/a&gt;Deploy to remote sites&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ hexo deploy&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;More info: &lt;a href=&quot;https://hexo.io/docs/deployment.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Deployment&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.
    
    </summary>
    
    
  </entry>
  
</feed>
